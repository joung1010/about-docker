### ğŸš€ ì‹¤ìŠµ ì¤€ë¹„

```bash
*# Docker daemon ì—°ê²° ì˜¤ë¥˜ ë°œìƒ*
$ docker pull nginx
Cannot connect to the Docker daemon at unix:///Users/jeonghwanpark/.docker/run/docker.sock. 
Is the docker daemon running?

*# Docker Desktop ì‹¤í–‰ìœ¼ë¡œ í•´ê²°*
$ open -a docker
```

**`open -a docker` ëª…ë ¹ì–´**:

- `open`: macOSì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” ëª…ë ¹ì–´
- `a`: ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë¦„ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” ì˜µì…˜
- `docker`: Docker Desktop ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰

### 1ï¸âƒ£ Nginx ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ

```bash
$ docker pull nginx
```

### **`docker pull` ëª…ë ¹ì–´ ìƒì„¸ ë¶„ì„**

```
docker pull [OPTIONS] NAME[:TAG|@DIGEST]

ê¸°ë³¸ êµ¬ì¡°:
$ docker pull nginx
         â†“
ì‹¤ì œë¡œëŠ”: docker pull nginx:latest
         â†“
ì™„ì „í•œ ê²½ë¡œ: docker pull docker.io/library/nginx:latest

êµ¬ì„± ìš”ì†Œ:
- docker.io: Docker Hub ë ˆì§€ìŠ¤íŠ¸ë¦¬ (ê¸°ë³¸ê°’)
- library: ê³µì‹ ì´ë¯¸ì§€ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ (ê¸°ë³¸ê°’)
- nginx: ì´ë¯¸ì§€ ì´ë¦„
- latest: íƒœê·¸ (ë²„ì „, ê¸°ë³¸ê°’)
```

### **ë‹¤ìš´ë¡œë“œ ê³¼ì •**

```
ì‹¤ì œ ë‹¤ìš´ë¡œë“œ ì¶œë ¥:
Using default tag: latest
latest: Pulling from library/nginx
a2abf6c4d29d: Pull complete     â† ë ˆì´ì–´ 1 ë‹¤ìš´ë¡œë“œ
66b1570312e7: Pull complete     â† ë ˆì´ì–´ 2 ë‹¤ìš´ë¡œë“œ  
d42f3f394686: Pull complete     â† ë ˆì´ì–´ 3 ë‹¤ìš´ë¡œë“œ
5abf8d4b4f40: Pull complete     â† ë ˆì´ì–´ 4 ë‹¤ìš´ë¡œë“œ
f95f09b3c518: Pull complete     â† ë ˆì´ì–´ 5 ë‹¤ìš´ë¡œë“œ
5f850b75b6ab: Pull complete     â† ë ˆì´ì–´ 6 ë‹¤ìš´ë¡œë“œ
28d28b3f8e1f: Pull complete     â† ë ˆì´ì–´ 7 ë‹¤ìš´ë¡œë“œ
Digest: sha256:2db21edf...        â† ì´ë¯¸ì§€ ë¬´ê²°ì„± ì²´í¬ì„¬
Status: Downloaded newer image for nginx:latest

ê° ë ˆì´ì–´ì˜ ì˜ë¯¸:
- ë ˆì´ì–´ 1-2: ë² ì´ìŠ¤ OS (Debian ë“±)
- ë ˆì´ì–´ 3-4: ì‹œìŠ¤í…œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° ì˜ì¡´ì„±
- ë ˆì´ì–´ 5-6: Nginx ë°”ì´ë„ˆë¦¬ ë° ì„¤ì • íŒŒì¼
- ë ˆì´ì–´ 7: ê¸°ë³¸ ì›¹í˜ì´ì§€ ë° ë©”íƒ€ë°ì´í„°
```

### **ë‹¤ì–‘í•œ pull ì˜µì…˜ë“¤**

```bash
íŠ¹ì • ë²„ì „ ë‹¤ìš´ë¡œë“œ:
$ docker pull nginx:1.21.6
$ docker pull nginx:alpine    *# ê²½ëŸ‰í™” ë²„ì „*

ëª¨ë“  íƒœê·¸ ë‹¤ìš´ë¡œë“œ:
$ docker pull -a nginx

ë‹¤ë¥¸ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì—ì„œ ë‹¤ìš´ë¡œë“œ:
$ docker pull gcr.io/project/image
$ docker pull amazonaws.com/image
```

### 2ï¸âƒ£ ë‹¤ìš´ë¡œë“œëœ ì´ë¯¸ì§€ í™•ì¸í•˜ê¸°

bash

```bash
$ docker image ls
```

### **`docker image ls` ëª…ë ¹ì–´ ìƒì„¸ ë¶„ì„**

```
ì¶œë ¥ ì˜ˆì‹œ:
REPOSITORY   TAG       IMAGE ID       CREATED        SIZE
nginx        latest    605c77e624dd   2 weeks ago    141MB

ê° ì»¬ëŸ¼ ì„¤ëª…:
- REPOSITORY: ì´ë¯¸ì§€ ì´ë¦„ (nginx)
- TAG: ë²„ì „ íƒœê·¸ (latest)  
- IMAGE ID: ì´ë¯¸ì§€ ê³ ìœ  ì‹ë³„ì (12ìë¦¬ í•´ì‹œ)
- CREATED: ì´ë¯¸ì§€ ìƒì„± ì‹œì 
- SIZE: ì´ë¯¸ì§€ ìš©ëŸ‰ (ì••ì¶•ëœ í¬ê¸°)
```

### **ë™ì¼ ëª…ë ¹ì–´ ë‹¤ë¥¸ í˜•íƒœë“¤**

```bash
ê°™ì€ ê¸°ëŠ¥ì˜ ë‹¤ë¥¸ ëª…ë ¹ì–´ë“¤:
$ docker image ls      *# ìƒˆë¡œìš´ í˜•íƒœ (ê¶Œì¥)*
$ docker images        *# ê¸°ì¡´ í˜•íƒœ (í˜¸í™˜ì„±)*
$ docker image list    *# ì™„ì „í•œ í˜•íƒœ*

ìœ ìš©í•œ ì˜µì…˜ë“¤:
$ docker image ls -a                    *# ì¤‘ê°„ ì´ë¯¸ì§€ê¹Œì§€ ëª¨ë‘ í‘œì‹œ*
$ docker image ls --no-trunc           *# IMAGE ID ì „ì²´ í‘œì‹œ*
$ docker image ls --format "table {{.Repository}}\t{{.Tag}}\t{{.Size}}"  *# ì»¤ìŠ¤í…€ í¬ë§·*
$ docker image ls --filter "dangling=true"  *# íƒœê·¸ ì—†ëŠ” ì´ë¯¸ì§€ë§Œ í‘œì‹œ*
```

### **ì´ë¯¸ì§€ ìƒì„¸ ì •ë³´ í™•ì¸**

```bash
ì´ë¯¸ì§€ ì„¸ë¶€ ì •ë³´ ë³´ê¸°:
$ docker image inspect nginx

ì¶œë ¥ ì˜ˆì‹œ (ì¼ë¶€):
[
    {
        "Id": "sha256:605c77e624dd...",
        "RepoTags": ["nginx:latest"],
        "RepoDigests": ["nginx@sha256:2db21edf..."],
        "Parent": "",
        "Comment": "",
        "Created": "2023-11-01T14:30:45Z",
        "Container": "...",
        "Config": {
            "Hostname": "",
            "Domainname": "",
            "User": "",
            "AttachStdin": false,
            "AttachStdout": false,
            "AttachStderr": false,
            "ExposedPorts": {
                "80/tcp": {}          â† ê¸°ë³¸ ë…¸ì¶œ í¬íŠ¸
            },
            "Env": [
                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
                "NGINX_VERSION=1.25.3"
            ],
            "Cmd": [
                "nginx",
                "-g",
                "daemon off;"         â† ê¸°ë³¸ ì‹¤í–‰ ëª…ë ¹ì–´
            ]
        },
        "Architecture": "amd64",
        "Os": "linux",
        "Size": 140869884,           â† ì‹¤ì œ í¬ê¸° (ë°”ì´íŠ¸)
        "VirtualSize": 140869884
    }
]
```

### 3ï¸âƒ£ ì´ë¯¸ì§€ë¥¼ ì»¨í…Œì´ë„ˆì— ì˜¬ë ¤ Nginx ì„œë²„ ì‹¤í–‰ì‹œí‚¤ê¸°

```bash
$ docker run --name webserver -d -p 80:80 nginx
```

### **`docker run` ëª…ë ¹ì–´ ìƒì„¸ ë¶„ì„**

```bash
docker run [OPTIONS] IMAGE [COMMAND] [ARG...]

ê° ì˜µì…˜ ìƒì„¸ ì„¤ëª…:

--name webserver:
- ì»¨í…Œì´ë„ˆì— ì´ë¦„ ë¶€ì—¬
- ì—†ìœ¼ë©´ Dockerê°€ ëœë¤ ì´ë¦„ ìƒì„± (ì˜ˆ: angry_einstein)
- ì´ë¦„ìœ¼ë¡œ ì»¨í…Œì´ë„ˆ ì°¸ì¡° ê°€ëŠ¥ (docker stop webserver)

-d (--detach):
- ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰ (ë°ëª¬ ëª¨ë“œ)
- í„°ë¯¸ë„ì´ ë¸”ë¡œí‚¹ë˜ì§€ ì•ŠìŒ
- ì»¨í…Œì´ë„ˆ ID ë°˜í™˜ í›„ í”„ë¡¬í”„íŠ¸ ë³µê·€

-p 80:80 (--publish):
- í¬íŠ¸ í¬ì›Œë”© ì„¤ì •
- í˜¸ìŠ¤íŠ¸í¬íŠ¸:ì»¨í…Œì´ë„ˆí¬íŠ¸
- 80:80 â†’ localhost:80 â†’ ì»¨í…Œì´ë„ˆì˜ 80í¬íŠ¸
```

### **í¬íŠ¸ ë§¤í•‘ ìƒì„¸**

```bash
í¬íŠ¸ ë§¤í•‘ ë‹¤ì–‘í•œ í˜•íƒœ:
-p 80:80              *# í˜¸ìŠ¤íŠ¸ 80 â†’ ì»¨í…Œì´ë„ˆ 80*
-p 8080:80            *# í˜¸ìŠ¤íŠ¸ 8080 â†’ ì»¨í…Œì´ë„ˆ 80*
-p 127.0.0.1:80:80    *# ë¡œì»¬í˜¸ìŠ¤íŠ¸ë§Œ ë°”ì¸ë”©*
-p 80                 *# ì»¨í…Œì´ë„ˆ 80ì„ í˜¸ìŠ¤íŠ¸ ëœë¤ í¬íŠ¸ì— ë°”ì¸ë”©*

ì—¬ëŸ¬ í¬íŠ¸ ë§¤í•‘:
$ docker run -p 80:80 -p 443:443 nginx

í¬íŠ¸ í™•ì¸:
$ docker port webserver
80/tcp -> 0.0.0.0:80
```

### **ì‹¤í–‰ ê³¼ì • ë‚´ë¶€ ë™ì‘**

```
docker run ì‹¤í–‰ ì‹œ ë‚´ë¶€ ê³¼ì •:

1. ì´ë¯¸ì§€ í™•ì¸:
   - ë¡œì»¬ì— nginx ì´ë¯¸ì§€ ì¡´ì¬ í™•ì¸
   - ì—†ìœ¼ë©´ ìë™ìœ¼ë¡œ docker pull nginx ì‹¤í–‰

2. ì»¨í…Œì´ë„ˆ ìƒì„±:
   - ìƒˆë¡œìš´ ì»¨í…Œì´ë„ˆ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
   - ê³ ìœ í•œ ì»¨í…Œì´ë„ˆ ID í• ë‹¹
   - ì´ë¦„ "webserver" ì§€ì •

3. ë„¤íŠ¸ì›Œí¬ ì„¤ì •:
   - ê°€ìƒ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ ìƒì„±
   - IP ì£¼ì†Œ í• ë‹¹ (ì˜ˆ: 172.17.0.2)
   - í¬íŠ¸ í¬ì›Œë”© ê·œì¹™ ì„¤ì •

4. íŒŒì¼ì‹œìŠ¤í…œ ì„¤ì •:
   - Copy-on-Write ë ˆì´ì–´ ìƒì„±
   - ì´ë¯¸ì§€ë¥¼ ì½ê¸° ì „ìš©ìœ¼ë¡œ ë§ˆìš´íŠ¸
   - ì“°ê¸° ê°€ëŠ¥í•œ ë ˆì´ì–´ ì¶”ê°€

5. í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰:
   - nginx ë°”ì´ë„ˆë¦¬ ì‹¤í–‰
   - ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê²©ë¦¬ ì ìš©
   - cgroups ë¦¬ì†ŒìŠ¤ ì œí•œ ì ìš©

ì¶œë ¥:
3f4d8e92a45b8c7d6e1f9a2e5c8b4f7d9e3a6c1b5f8e2d4c7a9f6e3b1d8c5a7e
(ì»¨í…Œì´ë„ˆ ID ë°˜í™˜)
```

### **ë‹¤ì–‘í•œ ì‹¤í–‰ ì˜µì…˜ë“¤**

```bash
ìì£¼ ì‚¬ìš©í•˜ëŠ” ì˜µì…˜ë“¤:

í™˜ê²½ ë³€ìˆ˜ ì„¤ì •:
$ docker run -e MYSQL_ROOT_PASSWORD=mypassword mysql

ë³¼ë¥¨ ë§ˆìš´íŠ¸:
$ docker run -v /host/path:/container/path nginx
$ docker run -v my-volume:/data nginx

ì¸í„°ë™í‹°ë¸Œ ëª¨ë“œ:
$ docker run -it ubuntu /bin/bash
*# -i: í‘œì¤€ì…ë ¥ ì—´ê¸°# -t: TTY í• ë‹¹*

ë©”ëª¨ë¦¬ ì œí•œ:
$ docker run -m 512m nginx     *# 512MB ì œí•œ*

CPU ì œí•œ:
$ docker run --cpus="1.5" nginx  *# 1.5 ì½”ì–´ ì œí•œ*

ìë™ ì‚­ì œ:
$ docker run --rm nginx        *# ì»¨í…Œì´ë„ˆ ì¢…ë£Œ ì‹œ ìë™ ì‚­ì œ*

ì½ê¸° ì „ìš©:
$ docker run --read-only nginx  *# íŒŒì¼ì‹œìŠ¤í…œ ì“°ê¸° ê¸ˆì§€*
```

### 4ï¸âƒ£ Nginx ì„œë²„ê°€ ì˜ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸í•˜ê¸°

ë¸Œë¼ìš°ì €ì—ì„œ `localhost:80` ì ‘ì†

### 5ï¸âƒ£ ì‹¤í–‰ë˜ê³  ìˆëŠ” ëª¨ë“  ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸í•˜ê¸°

```bash
$ docker ps
```

### **`docker ps` ëª…ë ¹ì–´ ìƒì„¸ ë¶„ì„**

```
ì¶œë ¥ ì˜ˆì‹œ:
CONTAINER ID   IMAGE   COMMAND                  CREATED         STATUS         PORTS                NAMES
3f4d8e92a45b   nginx   "/docker-entrypoint.â€¦"   2 minutes ago   Up 2 minutes   0.0.0.0:80->80/tcp   webserver

ê° ì»¬ëŸ¼ ì„¤ëª…:
- CONTAINER ID: ì»¨í…Œì´ë„ˆ ê³ ìœ  ì‹ë³„ì (ì¶•ì•½í˜•)
- IMAGE: ì‚¬ìš©ëœ ì´ë¯¸ì§€
- COMMAND: ì»¨í…Œì´ë„ˆì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ëª…ë ¹ì–´
- CREATED: ì»¨í…Œì´ë„ˆ ìƒì„± ì‹œì 
- STATUS: í˜„ì¬ ìƒíƒœ (Up, Exited, Paused ë“±)
- PORTS: í¬íŠ¸ ë§¤í•‘ ì •ë³´
- NAMES: ì»¨í…Œì´ë„ˆ ì´ë¦„
```

### **ë‹¤ì–‘í•œ ps ì˜µì…˜ë“¤**

```bash
ëª¨ë“  ì»¨í…Œì´ë„ˆ ë³´ê¸° (ì¤‘ì§€ëœ ê²ƒ í¬í•¨):
$ docker ps -a

CONTAINER ID   IMAGE   COMMAND   CREATED   STATUS                    PORTS   NAMES
3f4d8e92a45b   nginx   "..."     5 min     Up 5 minutes             80/tcp   webserver
1a2b3c4d5e6f   mysql   "..."     1 hour    Exited (0) 30 min ago            old-mysql

ë§ˆì§€ë§‰ nê°œ ì»¨í…Œì´ë„ˆ ë³´ê¸°:
$ docker ps -n 3

ì»¨í…Œì´ë„ˆ í¬ê¸° ì •ë³´ í¬í•¨:
$ docker ps -s

SIZE ì»¬ëŸ¼ ì¶”ê°€:
SIZE
2.13kB (virtual 141MB)
*# 2.13kB: ì“°ê¸° ë ˆì´ì–´ í¬ê¸°# 141MB: ì „ì²´ ê°€ìƒ í¬ê¸°*

IDë§Œ ì¶œë ¥:
$ docker ps -q
3f4d8e92a45b

ì»¤ìŠ¤í…€ í¬ë§·:
$ docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"
NAMES       STATUS          PORTS
webserver   Up 5 minutes    0.0.0.0:80->80/tcp

JSON í˜•íƒœë¡œ ì¶œë ¥:
$ docker ps --format json
{"Command":"\"/docker-entrypoint.sh nginx -g 'daemon off;'\"","CreatedAt":"2023-11-15 19:25:30 +0900 KST","ID":"3f4d8e92a45b","Image":"nginx","Labels":"","LocalVolumes":"0","Mounts":"","Names":"webserver","Networks":"bridge","Ports":"0.0.0.0:80->80/tcp","RunningFor":"5 minutes ago","Size":"0B","State":"running","Status":"Up 5 minutes"}
```

### **ì»¨í…Œì´ë„ˆ ìƒíƒœ ìƒì„¸ ì •ë³´**

```bash
íŠ¹ì • ì»¨í…Œì´ë„ˆ ìƒì„¸ ì •ë³´:
$ docker inspect webserver

ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§:
$ docker stats webserver

CONTAINER ID   NAME        CPU %     MEM USAGE / LIMIT     MEM %     NET I/O       BLOCK I/O   PIDS
3f4d8e92a45b   webserver   0.00%     3.352MiB / 7.765GiB   0.04%     656B / 656B   0B / 0B     2

ë¡œê·¸ í™•ì¸:
$ docker logs webserver
$ docker logs -f webserver  *# ì‹¤ì‹œê°„ ë¡œê·¸ ì¶”ì *
```

### 6ï¸âƒ£ íŠ¹ì • ì»¨í…Œì´ë„ˆ ì •ì§€

```bash
$ docker stop webserver
```

### **`docker stop` ëª…ë ¹ì–´ ìƒì„¸ ë¶„ì„**

```bash
docker stop [OPTIONS] CONTAINER [CONTAINER...]

ì •ì§€ ê³¼ì •:
1. SIGTERM ì‹ í˜¸ ì „ì†¡ (ì •ìƒ ì¢…ë£Œ ìš”ì²­)
2. Grace period ëŒ€ê¸° (ê¸°ë³¸ 10ì´ˆ)
3. ì‘ë‹µ ì—†ìœ¼ë©´ SIGKILL ì‹ í˜¸ ì „ì†¡ (ê°•ì œ ì¢…ë£Œ)

ì˜µì…˜ë“¤:
-t, --time: Grace period ì„¤ì • (ì´ˆ)
$ docker stop -t 30 webserver  *# 30ì´ˆ ëŒ€ê¸°*

ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆ ë™ì‹œ ì •ì§€:
$ docker stop webserver database cache

ëª¨ë“  ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ì •ì§€:
$ docker stop $(docker ps -q)
```

### **ì •ì§€ vs ì‚­ì œ vs ì¼ì‹œì •ì§€**

```bash
ë‹¤ì–‘í•œ ì»¨í…Œì´ë„ˆ ì œì–´ ëª…ë ¹ì–´:

ì •ì§€ (ë°ì´í„° ë³´ì¡´):
$ docker stop webserver
*# ì»¨í…Œì´ë„ˆëŠ” ì¡´ì¬í•˜ì§€ë§Œ ì‹¤í–‰ ì¤‘ì§€# docker ps -aì—ì„œ "Exited" ìƒíƒœë¡œ í‘œì‹œ*

ì¬ì‹œì‘:
$ docker start webserver   *# ì •ì§€ëœ ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘*
$ docker restart webserver *# ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘*

ì¼ì‹œì •ì§€:
$ docker pause webserver   *# í”„ë¡œì„¸ìŠ¤ ì¼ì‹œì •ì§€ (SIGSTOP)*
$ docker unpause webserver *# ì¼ì‹œì •ì§€ í•´ì œ (SIGCONT)*

ì‚­ì œ (ë°ì´í„° ì™„ì „ ì‚­ì œ):
$ docker rm webserver      *# ì •ì§€ëœ ì»¨í…Œì´ë„ˆ ì‚­ì œ*
$ docker rm -f webserver   *# ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ê°•ì œ ì‚­ì œ*

ì •ì§€ + ì‚­ì œ í•œë²ˆì—:
$ docker rm -f webserver

ì´ë¯¸ì§€ ì‚­ì œ:
$ docker rmi nginx         *# nginx ì´ë¯¸ì§€ ì‚­ì œ*
```

### ğŸ”„ ì „ì²´ ì‹¤ìŠµ íë¦„ ì •ë¦¬

```
`ì™„ì „í•œ ì‹¤ìŠµ íë¦„:

1. Docker ì‹¤í–‰ í™•ì¸
$ docker version

2. ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
$ docker pull nginx
$ docker image ls

3. ì»¨í…Œì´ë„ˆ ì‹¤í–‰
$ docker run --name webserver -d -p 80:80 nginx
$ docker ps

4. ë™ì‘ í™•ì¸
$ curl localhost:80
*# ë˜ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ localhost:80 ì ‘ì†*

5. ì •ë¦¬
$ docker stop webserver
$ docker rm webserver
$ docker rmi nginx`
```