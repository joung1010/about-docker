## ì»¨í…Œì´ë„ˆ ìƒì„±/ì‹¤í–‰

### ğŸ“¦ ì»¨í…Œì´ë„ˆ ìƒì„±

ì´ë¯¸ì§€ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì»¨í…Œì´ë„ˆë¥¼ **ìƒì„±**í•´ìš”. ì´ë•Œ, ì»¨í…Œì´ë„ˆë¥¼ **ì‹¤í–‰ì‹œí‚¤ì§€ëŠ” ì•Šì•„ìš”**.

*(ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ì§€ ì•Šê³  ìƒì„±ë§Œ í•˜ëŠ” ê²½ìš°ê°€ ì˜ ì—†ì–´ì„œ, ì´ ëª…ë ¹ì–´ëŠ” ì˜ ì‚¬ìš©í•˜ì§€ ì•Šì•„ìš”.)*

```bash
*# docker create ì´ë¯¸ì§€ëª…[:íƒœê·¸ëª…]*
$ docker create nginx

$ docker ps -a *# ëª¨ë“  ì»¨í…Œì´ë„ˆ ì¡°íšŒ*
```

### **docker create ìƒì„¸ ë™ì‘**

```
docker create ì‹¤í–‰ ê³¼ì •:

1. ì´ë¯¸ì§€ ì¡´ì¬ í™•ì¸:
   - ë¡œì»¬ì— nginx ì´ë¯¸ì§€ ìˆëŠ”ì§€ í™•ì¸
   - ì—†ìœ¼ë©´ Docker Hubì—ì„œ ìë™ ë‹¤ìš´ë¡œë“œ (docker pull nginx)

2. ì»¨í…Œì´ë„ˆ ìƒì„±:
   - ìƒˆë¡œìš´ ì»¨í…Œì´ë„ˆ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
   - ê³ ìœ í•œ ì»¨í…Œì´ë„ˆ ID í• ë‹¹ (64ìë¦¬ í•´ì‹œ)
   - ëœë¤ ì´ë¦„ ìƒì„± (ì˜ˆ: gracious_einstein)

3. ë©”íƒ€ë°ì´í„° ì„¤ì •:
   - ì´ë¯¸ì§€ ì •ë³´ ì—°ê²°
   - ë„¤íŠ¸ì›Œí¬ ì„¤ì • (ê¸°ë³¸ê°’)
   - ë³¼ë¥¨ ë§ˆìš´íŠ¸ (ê¸°ë³¸ê°’)
   - í™˜ê²½ ë³€ìˆ˜ (ì´ë¯¸ì§€ ê¸°ë³¸ê°’)

4. íŒŒì¼ì‹œìŠ¤í…œ ì¤€ë¹„:
   - Copy-on-Write ë ˆì´ì–´ ìƒì„±
   - ì´ë¯¸ì§€ ë ˆì´ì–´ë¥¼ ì½ê¸° ì „ìš©ìœ¼ë¡œ ë§ˆìš´íŠ¸
   - ì»¨í…Œì´ë„ˆ ì „ìš© ì“°ê¸° ë ˆì´ì–´ ì¶”ê°€

ì¶œë ¥ ê²°ê³¼:
3f4d8e92a45b8c7d6e1f9a2e5c8b4f7d9e3a6c1b5f8e2d4c7a9f6e3b1d8c5a7e
(ìƒì„±ëœ ì»¨í…Œì´ë„ˆ ID)
```

### **ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸**

```bash
$ docker ps -a
CONTAINER ID   IMAGE   COMMAND                  CREATED         STATUS    PORTS   NAMES
3f4d8e92a45b   nginx   "/docker-entrypoint.â€¦"   2 minutes ago   Created           gracious_einstein

STATUS ì„¤ëª…:
- Created: ìƒì„±ë¨ (ì•„ì§ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ)
- Up: ì‹¤í–‰ ì¤‘
- Exited: ì¢…ë£Œë¨
- Paused: ì¼ì‹œì •ì§€ë¨
- Restarting: ì¬ì‹œì‘ ì¤‘`
```

### ğŸš€ ì»¨í…Œì´ë„ˆ ì‹¤í–‰

ì •ì§€ë˜ì–´ ìˆëŠ” ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰ì‹œì¼œìš”.

```bash
*# docker start ì»¨í…Œì´ë„ˆëª…[ë˜ëŠ” ì»¨í…Œì´ë„ˆ ID]*
$ docker start ì»¨í…Œì´ë„ˆëª…[ë˜ëŠ” ì»¨í…Œì´ë„ˆ ID]

$ docker ps *# ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ì¡°íšŒ*
```

### **docker start ìƒì„¸ ë™ì‘**

```
docker start ì‹¤í–‰ ê³¼ì •:

1. ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸:
   - ì§€ì •ëœ ì»¨í…Œì´ë„ˆ ID/ì´ë¦„ìœ¼ë¡œ ì»¨í…Œì´ë„ˆ ì°¾ê¸°
   - í˜„ì¬ ìƒíƒœ í™•ì¸ (Created, Exited ìƒíƒœì—¬ì•¼ ì‹œì‘ ê°€ëŠ¥)

2. ë¦¬ì†ŒìŠ¤ í• ë‹¹:
   - CPU, ë©”ëª¨ë¦¬ ì œí•œ ì ìš©
   - ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ ì—°ê²°
   - ë³¼ë¥¨ ë§ˆìš´íŠ¸

3. í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰:
   - ì´ë¯¸ì§€ì— ì •ì˜ëœ ENTRYPOINT/CMD ì‹¤í–‰
   - PID 1 í”„ë¡œì„¸ìŠ¤ë¡œ ì‹œì‘
   - ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê²©ë¦¬ ì ìš©

4. ìƒíƒœ ë³€ê²½:
   - STATUS: Created â†’ Up
   - ì‹¤í–‰ ì‹œì‘ ì‹œê°„ ê¸°ë¡

ì»¨í…Œì´ë„ˆëª…ìœ¼ë¡œ ì‹¤í–‰:
$ docker start gracious_einstein

ì»¨í…Œì´ë„ˆ IDë¡œ ì‹¤í–‰ (ë¶€ë¶„ ID ê°€ëŠ¥):
$ docker start 3f4d8e92a45b
$ docker start 3f4d        *# ì• 4ìë¦¬ë¡œë„ ê°€ëŠ¥*
```

### **ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ í™•ì¸**

```bash
$ docker ps
CONTAINER ID   IMAGE   COMMAND                  CREATED         STATUS         PORTS   NAMES
3f4d8e92a45b   nginx   "/docker-entrypoint.â€¦"   5 minutes ago   Up 2 minutes   80/tcp  gracious_einstein

ì£¼ëª©í•  ì :
- STATUSê°€ "Up 2 minutes"ë¡œ ë³€ê²½ë¨
- PORTSì— 80/tcp í‘œì‹œ (nginx ê¸°ë³¸ í¬íŠ¸)
- í•˜ì§€ë§Œ í˜¸ìŠ¤íŠ¸ì—ì„œ ì ‘ê·¼ì€ ë¶ˆê°€ (í¬íŠ¸ ë§¤í•‘ ì•ˆ ë¨)
```

### ğŸ§¹ ì»¨í…Œì´ë„ˆ ì •ë¦¬

```bash
*# Nginx ì»¨í…Œì´ë„ˆ ì¤‘ë‹¨ í›„ ì‚­ì œí•˜ê¸°*
$ docker ps *# ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ì¡°íšŒ*
$ docker stop {nginxë¥¼ ì‹¤í–‰ì‹œí‚¨ Container ID} *# ì»¨í…Œì´ë„ˆ ì¤‘ë‹¨*
$ docker rm {nginxë¥¼ ì‹¤í–‰ì‹œí‚¨ Container ID} *# ì»¨í…Œì´ë„ˆ ì‚­ì œ*
$ docker image rm nginx *# Nginx ì´ë¯¸ì§€ ì‚­ì œ*
```

### **ì •ë¦¬ ê³¼ì • ìƒì„¸**

```bash
ë‹¨ê³„ë³„ ì •ë¦¬:

1. ì»¨í…Œì´ë„ˆ ì¤‘ì§€:
$ docker stop 3f4d8e92a45b
3f4d8e92a45b

ë‚´ë¶€ ë™ì‘:
- SIGTERM ì‹ í˜¸ ì „ì†¡ (ì •ìƒ ì¢…ë£Œ ìš”ì²­)
- 10ì´ˆ ëŒ€ê¸° (Grace Period)
- ì‘ë‹µ ì—†ìœ¼ë©´ SIGKILL ì „ì†¡ (ê°•ì œ ì¢…ë£Œ)

2. ì»¨í…Œì´ë„ˆ ì‚­ì œ:
$ docker rm 3f4d8e92a45b
3f4d8e92a45b

ë‚´ë¶€ ë™ì‘:
- ì»¨í…Œì´ë„ˆ ë©”íƒ€ë°ì´í„° ì‚­ì œ
- ì“°ê¸° ë ˆì´ì–´ ì‚­ì œ
- ë„¤íŠ¸ì›Œí¬ ì—°ê²° í•´ì œ
- ë³¼ë¥¨ ì–¸ë§ˆìš´íŠ¸ (ë³¼ë¥¨ ìì²´ëŠ” ë³´ì¡´)

3. ì´ë¯¸ì§€ ì‚­ì œ:
$ docker image rm nginx
Untagged: nginx:latest
Deleted: sha256:605c77e624dd...

ì£¼ì˜ì‚¬í•­:
- ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆê°€ ê°™ì€ ì´ë¯¸ì§€ ì‚¬ìš© ì¤‘ì´ë©´ ì‚­ì œ ë¶ˆê°€
- ê°•ì œ ì‚­ì œëŠ” -f ì˜µì…˜ ì‚¬ìš©
```

### ğŸƒâ€â™‚ï¸ ì»¨í…Œì´ë„ˆ ìƒì„± + ì‹¤í–‰

ì´ë¯¸ì§€ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•œ ë’¤, ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰ê¹Œì§€ ì‹œì¼œìš”.

*(ì²˜ìŒì— ì´ë¯¸ì§€ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰ì‹œí‚¤ê³  ì‹¶ì„ ë•Œ, ì´ ëª…ë ¹ì–´ë¥¼ ìì£¼ ì‚¬ìš©í•´ìš”.)*

```bash
*# docker run ì´ë¯¸ì§€ëª…[:íƒœê·¸ëª…]*
$ docker run nginx *# í¬ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰ (ì¶”ê°€ì ì¸ ëª…ë ¹ì–´ ì¡°ì‘ì„ í•  ìˆ˜ê°€ ì—†ìŒ)# Ctrl + Cë¡œ ì¢…ë£Œí•  ìˆ˜ ìˆìŒ*
```

### **docker run = docker create + docker start**

```bash
docker runì˜ ë‚´ë¶€ ë™ì‘:
$ docker run nginx
         â†“ ë‚´ë¶€ì ìœ¼ë¡œ ë¶„í•´ë˜ë©´
$ docker create nginx  *# ì»¨í…Œì´ë„ˆ ìƒì„±*
$ docker start nginx   *# ì»¨í…Œì´ë„ˆ ì‹œì‘*

í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” ìµœì í™”ë˜ì–´ í•œ ë²ˆì— ì²˜ë¦¬ë¨

ë¡œì»¬ ì´ë¯¸ì§€ ì—†ì„ ë•Œ:
1. Docker Hubì—ì„œ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ (docker pull nginx)
2. ì»¨í…Œì´ë„ˆ ìƒì„±
3. ì»¨í…Œì´ë„ˆ ì‹œì‘

ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸ í™•ì¸:
- docker runì€ ë¡œì»¬ ì´ë¯¸ì§€ ì‚¬ìš©
- ìƒˆë¡œìš´ ë²„ì „ í™•ì¸í•˜ë ¤ë©´ ë¨¼ì € docker pull ì‹¤í–‰
```

### **í¬ê·¸ë¼ìš´ë“œ ì‹¤í–‰ì˜ íŠ¹ì§•**

bash

```bash
í¬ê·¸ë¼ìš´ë“œ ì‹¤í–‰ ì‹œ ì¶œë ¥:
$ docker run nginx
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
...
2023/11/15 10:30:45 [notice] 1*#1: nginx/1.25.3*
2023/11/15 10:30:45 [notice] 1*#1: built by gcc 12.2.0 (Debian 12.2.0-14)*
2023/11/15 10:30:45 [notice] 1*#1: OS: Linux 5.15.49-linuxkit*
2023/11/15 10:30:45 [notice] 1*#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576*
2023/11/15 10:30:45 [notice] 1*#1: start worker processes*

íŠ¹ì§•:
- ì‹¤ì‹œê°„ ë¡œê·¸ ì¶œë ¥
- í„°ë¯¸ë„ì´ ë¸”ë¡œí‚¹ë¨ (ë‹¤ë¥¸ ëª…ë ¹ì–´ ì…ë ¥ ë¶ˆê°€)
- Ctrl+Cë¡œ ì»¨í…Œì´ë„ˆ ì¢…ë£Œ
- ë””ë²„ê¹… ì‹œ ìœ ìš©
```

### ğŸŒŸ í¬ê·¸ë¼ìš´ë“œ vs ë°±ê·¸ë¼ìš´ë“œ

> í¬ê·¸ë¼ìš´ë“œ(foreground)**ì™€ ë°±ê·¸ë¼ìš´ë“œ(background)ì˜ ì°¨ì´ë¥¼ ëª¨ë¥´ëŠ” ë¶„ë“¤ì„ ìœ„í•´ ê°„ë‹¨íˆ ì •ë¦¬í•˜ê³  ê°€ì£ .
>
>
> **í¬ê·¸ë¼ìš´ë“œ**ëŠ” **ë‚´ê°€ ì‹¤í–‰ì‹œí‚¨ í”„ë¡œê·¸ë¨ì˜ ë‚´ìš©ì´ í™”ë©´ì—ì„œ ì‹¤í–‰ë˜ê³  ì¶œë ¥ë˜ëŠ” ìƒíƒœ**ë¥¼ ëœ»í•´ìš”. ê·¸ëŸ¬ë‹¤ë³´ë‹ˆ í¬ê·¸ë¼ìš´ë“œ ìƒíƒœì—ì„œëŠ” ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ì„ ì¡°ì‘í•  ìˆ˜ê°€ ì—†ì–´ìš”.
>
> **ë°±ê·¸ë¼ìš´ë“œ**ëŠ” **ë‚´ê°€ ì‹¤í–‰ì‹œí‚¨ í”„ë¡œê·¸ë¨ì´ ì»´í“¨í„° ë‚´ë¶€ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ìƒíƒœ**ë¥¼ ì˜ë¯¸í•´ìš”. ê·¸ë˜ì„œ í”„ë¡œê·¸ë¨ì´ ì–´ë–»ê²Œ ì‹¤í–‰ë˜ê³  ìˆëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ í™”ë©´ì—ì„œ í™•ì¸í•  ìˆ˜ ì—†ì–´ìš”. ì´ëŸ° íŠ¹ì„± ë•Œë¬¸ì— ë‹¤ë¥¸ ëª…ë ¹ì–´ë¥¼ ì¶”ê°€ë¡œ ì…ë ¥í•  ìˆ˜ë„ ìˆê³ , ìƒˆë¡œìš´ í”„ë¡œê·¸ë¨ì„ ì¡°ì‘í•  ìˆ˜ë„ ìˆì–´ìš”.
>

### **ì‹¤ìƒí™œ ë¹„ìœ **

```
í¬ê·¸ë¼ìš´ë“œ (Foreground):
- TV ì‹œì²­í•˜ë©´ì„œ ë¦¬ëª¨ì»¨ ì¡°ì‘
- ê²Œì„ í”Œë ˆì´ ì¤‘
- í™”ìƒíšŒì˜ ì°¸ì—¬ ì¤‘
â†’ ë‹¤ë¥¸ ì¼ì„ ë™ì‹œì— í•˜ê¸° ì–´ë ¤ì›€

ë°±ê·¸ë¼ìš´ë“œ (Background):
- ìŒì•… ìŠ¤íŠ¸ë¦¬ë° (ë°°ê²½ ì¬ìƒ)
- íŒŒì¼ ë‹¤ìš´ë¡œë“œ (ë°±ê·¸ë¼ìš´ë“œ ì§„í–‰)
- ìë™ ë°±ì—… (ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰)
â†’ ë‹¤ë¥¸ ì¼ì„ ë™ì‹œì— í•  ìˆ˜ ìˆìŒ

Dockerì—ì„œ:
í¬ê·¸ë¼ìš´ë“œ: ë¡œê·¸ ì‹¤ì‹œê°„ í™•ì¸, ë””ë²„ê¹…
ë°±ê·¸ë¼ìš´ë“œ: ì„œë¹„ìŠ¤ ìš´ì˜, ë‹¤ì¤‘ ì»¨í…Œì´ë„ˆ ê´€ë¦¬
```

### ğŸ”‡ ì»¨í…Œì´ë„ˆë¥¼ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰ì‹œí‚¤ê¸°

```bash
*# docker run **-d** ì´ë¯¸ì§€ëª…[:íƒœê·¸ëª…]*
$ docker run -d nginx
```

### **d ì˜µì…˜ (detached mode)**

```bash
ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰:
$ docker run -d nginx
3f4d8e92a45b8c7d6e1f9a2e5c8b4f7d9e3a6c1b5f8e2d4c7a9f6e3b1d8c5a7e

ê²°ê³¼:
- ì»¨í…Œì´ë„ˆ IDë§Œ ì¶œë ¥
- í”„ë¡¬í”„íŠ¸ ì¦‰ì‹œ ë³µê·€
- ë‹¤ë¥¸ ëª…ë ¹ì–´ ì…ë ¥ ê°€ëŠ¥
- ì»¨í…Œì´ë„ˆëŠ” ë°±ê·¸ë¼ìš´ë“œì—ì„œ ê³„ì† ì‹¤í–‰

ì‹¤í–‰ ìƒíƒœ í™•ì¸:
$ docker ps
CONTAINER ID   IMAGE   COMMAND                  CREATED         STATUS         PORTS   NAMES
3f4d8e92a45b   nginx   "/docker-entrypoint.â€¦"   1 minute ago    Up 1 minute    80/tcp  amazing_curie
```

### **ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰ì˜ ì¥ì **

```bash
ë‹¤ì¤‘ ì»¨í…Œì´ë„ˆ ê´€ë¦¬:
$ docker run -d --name web nginx
$ docker run -d --name db mysql:8.0
$ docker run -d --name cache redis

$ docker ps
CONTAINER ID   IMAGE     COMMAND     CREATED   STATUS      PORTS      NAMES
abc123def456   nginx     "..."       1 min     Up 1 min    80/tcp     web
def456abc123   mysql:8.0 "..."       1 min     Up 1 min    3306/tcp   db
789abc123def   redis     "..."       1 min     Up 1 min    6379/tcp   cache

ëª¨ë“  ì»¨í…Œì´ë„ˆê°€ ë™ì‹œì— ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰ë¨
```

### ğŸ§¹ ë°±ê·¸ë¼ìš´ë“œ ì»¨í…Œì´ë„ˆ ì •ë¦¬

```bash
*# Nginx ì»¨í…Œì´ë„ˆ ì¤‘ë‹¨ í›„ ì‚­ì œí•˜ê¸°*
$ docker ps *# ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ì¡°íšŒ*
$ docker stop {nginxë¥¼ ì‹¤í–‰ì‹œí‚¨ Container ID} *# ì»¨í…Œì´ë„ˆ ì¤‘ë‹¨*
$ docker rm {nginxë¥¼ ì‹¤í–‰ì‹œí‚¨ Container ID} *# ì»¨í…Œì´ë„ˆ ì‚­ì œ*
$ docker image rm nginx *# Nginx ì´ë¯¸ì§€ ì‚­ì œ*
```

### ğŸ·ï¸ ì»¨í…Œì´ë„ˆì— ì´ë¦„ ë¶™ì—¬ì„œ ìƒì„± ë° ì‹¤í–‰í•˜ê¸°

bash

```bash
*# docker run -d **--name [ì»¨í…Œì´ë„ˆ ì´ë¦„]** ì´ë¯¸ì§€ëª…[:íƒœê·¸ëª…]*
$ docker run -d --name my-web-server nginx
```

### **-name ì˜µì…˜ì˜ ì¥ì **

```bash
ëœë¤ ì´ë¦„ vs ì§€ì • ì´ë¦„:

ëœë¤ ì´ë¦„ (ê¸°ë³¸):
$ docker run -d nginx
â†’ ì´ë¦„: amazing_curie, gracious_einstein ë“±

ì§€ì • ì´ë¦„:
$ docker run -d --name my-web-server nginx
â†’ ì´ë¦„: my-web-server

ê´€ë¦¬ìƒ ì¥ì :
$ docker stop my-web-server     *# ê¸°ì–µí•˜ê¸° ì‰¬ì›€*
$ docker start my-web-server
$ docker logs my-web-server
$ docker exec -it my-web-server bash

vs

$ docker stop amazing_curie     *# ë§¤ë²ˆ ì´ë¦„ í™•ì¸ í•„ìš”*
$ docker start amazing_curie
```

### **ì»¨í…Œì´ë„ˆ ì´ë¦„ ê·œì¹™**

```bash
ì´ë¦„ ê·œì¹™:
âœ… í—ˆìš©: ì˜ë¬¸ì, ìˆ«ì, í•˜ì´í”ˆ(-), ì–¸ë”ìŠ¤ì½”ì–´(_), ì (.)
âœ… ì˜ˆì‹œ: web-server, my_app, api.v1, nginx-prod

âŒ ê¸ˆì§€: ëŒ€ë¬¸ì, ê³µë°±, íŠ¹ìˆ˜ë¬¸ì(!@*#$% ë“±)*
âŒ ì˜ˆì‹œ: Web-Server, my app, api@v1

ì´ë¦„ ì¤‘ë³µ í™•ì¸:
$ docker run -d --name web nginx      *# ì„±ê³µ*
$ docker run -d --name web mysql      *# ì‹¤íŒ¨! ì´ë¦„ ì¤‘ë³µ*

Error: Conflict. The container name "/web" is already in use
```

### ğŸ§¹ ì´ë¦„ ì§€ì • ì»¨í…Œì´ë„ˆ ì •ë¦¬

```bash
*# Nginx ì»¨í…Œì´ë„ˆ ì¤‘ë‹¨ í›„ ì‚­ì œí•˜ê¸°*
$ docker ps *# ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ì¡°íšŒ*
$ docker stop my-web-server *# ì»¨í…Œì´ë„ˆ ì¤‘ë‹¨*
$ docker rm my-web-server *# ì»¨í…Œì´ë„ˆ ì‚­ì œ*
$ docker image rm nginx *# Nginx ì´ë¯¸ì§€ ì‚­ì œ*
```

### ğŸŒ í˜¸ìŠ¤íŠ¸ì˜ í¬íŠ¸ì™€ ì»¨í…Œì´ë„ˆì˜ í¬íŠ¸ë¥¼ ì—°ê²°í•˜ê¸°

```bash
*# docker run -d **-p [í˜¸ìŠ¤íŠ¸ í¬íŠ¸]:[ì»¨í…Œì´ë„ˆ í¬íŠ¸]** ì´ë¯¸ì§€ëª…[:íƒœê·¸ëª…]*
$ docker run -d -p 4000:80 nginx
```

`docker run -p 4000:80`ë¼ê³  ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ê²Œ ë˜ë©´, ë„ì»¤ë¥¼ ì‹¤í–‰í•˜ëŠ” í˜¸ìŠ¤íŠ¸ì˜ 4000ë²ˆ í¬íŠ¸ë¥¼ ì»¨í…Œì´ë„ˆì˜ 80ë²ˆ í¬íŠ¸ë¡œ ì—°ê²°í•˜ë„ë¡ ì„¤ì •í•´ìš”.

### **í¬íŠ¸ ë§¤í•‘ ìƒì„¸ ì›ë¦¬**

```
í¬íŠ¸ ë§¤í•‘ êµ¬ì¡°:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Host OS                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ë¸Œë¼ìš°ì €: localhost:4000 ìš”ì²­               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                     â†“                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Docker Engine: í¬íŠ¸ í¬ì›Œë”©                  â”‚â”‚
â”‚  â”‚ 4000 â†’ 80 ë§¤í•‘ ê·œì¹™ ì ìš©                   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                     â†“                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Container (172.17.0.2:80)                  â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚ â”‚ Nginx ì›¹ì„œë²„ (í¬íŠ¸ 80ì—ì„œ ëŒ€ê¸°)         â”‚ â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

íŒ¨í‚· íë¦„:
ì™¸ë¶€ ìš”ì²­ â†’ Host:4000 â†’ Docker Bridge â†’ Container:80 â†’ Nginx
```

### **ë‹¤ì–‘í•œ í¬íŠ¸ ë§¤í•‘ ë°©ë²•**

```bash
ê¸°ë³¸ í¬íŠ¸ ë§¤í•‘:
$ docker run -d -p 4000:80 nginx
*# í˜¸ìŠ¤íŠ¸ 4000 â†’ ì»¨í…Œì´ë„ˆ 80*

ë™ì¼ í¬íŠ¸ ë§¤í•‘:
$ docker run -d -p 80:80 nginx
*# í˜¸ìŠ¤íŠ¸ 80 â†’ ì»¨í…Œì´ë„ˆ 80*

ì—¬ëŸ¬ í¬íŠ¸ ë§¤í•‘:
$ docker run -d -p 80:80 -p 443:443 nginx
*# HTTPì™€ HTTPS ë™ì‹œ ë§¤í•‘*

IP ì§€ì • ë§¤í•‘:
$ docker run -d -p 127.0.0.1:4000:80 nginx
*# ë¡œì»¬í˜¸ìŠ¤íŠ¸ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥*

ëœë¤ í¬íŠ¸ ë§¤í•‘:
$ docker run -d -p 80 nginx
*# í˜¸ìŠ¤íŠ¸ì˜ ëœë¤ í¬íŠ¸ â†’ ì»¨í…Œì´ë„ˆ 80*

í¬íŠ¸ í™•ì¸:
$ docker port [ì»¨í…Œì´ë„ˆëª…]
80/tcp -> 0.0.0.0:32768  *# ëœë¤ í¬íŠ¸ ê²°ê³¼*
```

### **ë„¤íŠ¸ì›Œí¬ êµ¬ì¡° ì´í•´**

```bash
Docker ë„¤íŠ¸ì›Œí¬ ìŠ¤íƒ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Physical Network                   â”‚
â”‚                (ì¸í„°ë„·)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Host Network                      â”‚
â”‚              (eth0: 192.168.1.100)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚          iptables Rules                     â”‚â”‚
â”‚  â”‚  -A DOCKER -p tcp --dport 4000              â”‚â”‚
â”‚  â”‚   -j DNAT --to-destination 172.17.0.2:80   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Docker Bridge Network               â”‚
â”‚               (docker0: 172.17.0.1)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Container 1 (172.17.0.2:80)  â† nginx       â”‚â”‚
â”‚  â”‚ Container 2 (172.17.0.3:3306) â† mysql      â”‚â”‚
â”‚  â”‚ Container 3 (172.17.0.4:6379) â† redis      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **í¬íŠ¸ ë§¤í•‘ ë™ì‘ í™•ì¸**

```bash
ì»¨í…Œì´ë„ˆ ì‹¤í–‰:
$ docker run -d -p 4000:80 --name web nginx
abc123def456

í¬íŠ¸ ë§¤í•‘ í™•ì¸:
$ docker ps
CONTAINER ID   IMAGE   COMMAND   CREATED   STATUS   PORTS                 NAMES
abc123def456   nginx   "..."     1 min     Up 1 min 0.0.0.0:4000->80/tcp  web

ì ‘ê·¼ í…ŒìŠ¤íŠ¸:
$ curl localhost:4000
<!DOCTYPE html>
<html>
<head>
<title>Welcome to nginx!</title>
...

ë˜ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ:
http://localhost:4000

ë„¤íŠ¸ì›Œí¬ ìƒíƒœ í™•ì¸:
$ netstat -tlnp | grep 4000
tcp6       0      0 :::4000                 :::*                    LISTEN      1234/docker-proxy

iptables ê·œì¹™ í™•ì¸:
$ sudo iptables -t nat -L DOCKER
Chain DOCKER (2 references)
target     prot opt source               destination
DNAT       tcp  --  0.0.0.0/0            0.0.0.0/0            tcp dpt:4000 to:172.17.0.2:80
```