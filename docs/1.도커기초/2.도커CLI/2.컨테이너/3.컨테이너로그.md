## ì»¨í…Œì´ë„ˆ ë¡œê·¸ ì¡°íšŒ

### ğŸ“‹ ì»¨í…Œì´ë„ˆ(Container) ë¡œê·¸ ì¡°íšŒ

### **[íŠ¹ì • ì»¨í…Œì´ë„ˆì˜ ëª¨ë“  ë¡œê·¸ ì¡°íšŒ]**

```bash
*# docker logs [ì»¨í…Œì´ë„ˆ ID ë˜ëŠ” ì»¨í…Œì´ë„ˆëª…]*

$ docker run -d nginx
$ docker logs [nginxê°€ ì‹¤í–‰ë˜ê³  ìˆëŠ” ì»¨í…Œì´ë„ˆ ID]
```

### **Docker ë¡œê·¸ ì‹œìŠ¤í…œ ì´í•´**

```bash
Docker ë¡œê·¸ êµ¬ì¡°:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Container                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Application (nginx)                         â”‚â”‚
â”‚  â”‚ â”œâ”€ stdout (í‘œì¤€ ì¶œë ¥)                       â”‚â”‚
â”‚  â”‚ â”‚  â””â”€ ì•¡ì„¸ìŠ¤ ë¡œê·¸, ì¼ë°˜ ë©”ì‹œì§€               â”‚â”‚
â”‚  â”‚ â””â”€ stderr (í‘œì¤€ ì—ëŸ¬)                       â”‚â”‚
â”‚  â”‚    â””â”€ ì—ëŸ¬ ë©”ì‹œì§€, ê²½ê³                      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Docker Log Driver                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ê¸°ë³¸: json-file                             â”‚â”‚
â”‚  â”‚ ìœ„ì¹˜: /var/lib/docker/containers/           â”‚â”‚
â”‚  â”‚      [container-id]/[container-id]-json.log â”‚â”‚
â”‚  â”‚                                            â”‚â”‚
â”‚  â”‚ ë‹¤ë¥¸ ë“œë¼ì´ë²„:                              â”‚â”‚
â”‚  â”‚ - syslog: ì‹œìŠ¤í…œ ë¡œê·¸ë¡œ ì „ì†¡                â”‚â”‚
â”‚  â”‚ - journald: systemd ì €ë„ë¡œ ì „ì†¡             â”‚â”‚
â”‚  â”‚ - gelf: Graylogë¡œ ì „ì†¡                     â”‚â”‚
â”‚  â”‚ - awslogs: AWS CloudWatchë¡œ ì „ì†¡           â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **ë¡œê·¸ ì¡°íšŒ ì‹¤ìŠµ**

```bash
nginx ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ë° ë¡œê·¸ í™•ì¸:
$ docker run -d --name web nginx
abc123def456

ëª¨ë“  ë¡œê·¸ ì¡°íšŒ:
$ docker logs web
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
20-envsubst-on-templates.sh: info: No template files found, skipping
/docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
30-tune-worker-processes.sh: info: no config file specified, using defaults
/docker-entrypoint.sh: Configuration complete; ready for start up
2023/11/15 10:30:45 [notice] 1*#1: using the "epoll" event method*
2023/11/15 10:30:45 [notice] 1*#1: nginx/1.25.3*
2023/11/15 10:30:45 [notice] 1*#1: start worker processes*
2023/11/15 10:30:45 [notice] 1*#1: start worker process 29*

ë¡œê·¸ êµ¬ì„± ìš”ì†Œ:
- ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ë¡œê·¸
- nginx ì„¤ì • ì´ˆê¸°í™” ë¡œê·¸  
- nginx ë§ˆìŠ¤í„° í”„ë¡œì„¸ìŠ¤ ì‹œì‘ ë¡œê·¸
- ì›Œì»¤ í”„ë¡œì„¸ìŠ¤ ì‹œì‘ ë¡œê·¸
```

### ğŸ“ ìµœê·¼ ë¡œê·¸ 10ì¤„ë§Œ ì¡°íšŒ

### **[ìµœê·¼ ë¡œê·¸ 10ì¤„ë§Œ ì¡°íšŒ]**

```bash
*# docker logs --tail [ë¡œê·¸ ëë¶€í„° í‘œì‹œí•  ì¤„ ìˆ˜] [ì»¨í…Œì´ë„ˆ ID ë˜ëŠ” ì»¨í…Œì´ë„ˆëª…]*
$ docker logs --tail 10 [ì»¨í…Œì´ë„ˆ ID ë˜ëŠ” ì»¨í…Œì´ë„ˆëª…]
```

### **-tail ì˜µì…˜ ìƒì„¸**

```bash
ë‹¤ì–‘í•œ tail ì‚¬ìš©ë²•:
$ docker logs --tail 10 web      *# ë§ˆì§€ë§‰ 10ì¤„*
$ docker logs --tail 5 web       *# ë§ˆì§€ë§‰ 5ì¤„*
$ docker logs --tail 1 web       *# ë§ˆì§€ë§‰ 1ì¤„*
$ docker logs --tail 100 web     *# ë§ˆì§€ë§‰ 100ì¤„*

ì‹¤ì œ ì¶œë ¥ ì˜ˆì‹œ:
$ docker logs --tail 5 web
/docker-entrypoint.sh: Configuration complete; ready for start up
2023/11/15 10:30:45 [notice] 1*#1: using the "epoll" event method*
2023/11/15 10:30:45 [notice] 1*#1: nginx/1.25.3*
2023/11/15 10:30:45 [notice] 1*#1: start worker processes*
2023/11/15 10:30:45 [notice] 1*#1: start worker process 29*

íŒŒì¼ í¬ê¸°ê°€ í° ë¡œê·¸ì—ì„œ ìœ ìš©:
- ëŒ€ìš©ëŸ‰ ë¡œê·¸ì—ì„œ ìµœì‹  ì •ë³´ë§Œ ë¹ ë¥´ê²Œ í™•ì¸
- ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ ì ˆì•½
- í„°ë¯¸ë„ ì¶œë ¥ ì–‘ ì œí•œ
```

### ğŸ“º ê¸°ì¡´ ë¡œê·¸ ì¡°íšŒ + ìƒì„±ë˜ëŠ” ë¡œê·¸ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³´ê³  ì‹¶ì€ ê²½ìš°

### **[ê¸°ì¡´ ë¡œê·¸ ì¡°íšŒ + ì‹¤ì‹œê°„ ë¡œê·¸ ì¶”ì ]**

```bash
*# docker logs -f [ì»¨í…Œì´ë„ˆ ID ë˜ëŠ” ì»¨í…Œì´ë„ˆëª…]# Nginxì˜ ì»¨í…Œì´ë„ˆì— ì‹¤ì‹œê°„ìœ¼ë¡œ ìŒ“ì´ëŠ” ë¡œê·¸ í™•ì¸í•˜ê¸°*
$ docker run -d -p 80:80 nginx
$ docker logs -f [ì»¨í…Œì´ë„ˆ ID ë˜ëŠ” ì»¨í…Œì´ë„ˆëª…]
```

- **`f`** : **follow**ì˜ ì•½ì–´

### **f ì˜µì…˜ ìƒì„¸ ë™ì‘**

```bash
ì‹¤ì‹œê°„ ë¡œê·¸ ì¶”ì :
$ docker logs -f web
/docker-entrypoint.sh: Configuration complete; ready for start up
2023/11/15 10:30:45 [notice] 1*#1: using the "epoll" event method*
2023/11/15 10:30:45 [notice] 1*#1: nginx/1.25.3*
2023/11/15 10:30:45 [notice] 1*#1: start worker processes*
2023/11/15 10:30:45 [notice] 1*#1: start worker process 29# ì—¬ê¸°ì„œ ëŒ€ê¸° ìƒíƒœ (ìƒˆ ë¡œê·¸ ê¸°ë‹¤ë¦¼)*

ìƒˆë¡œìš´ í„°ë¯¸ë„ì—ì„œ ì›¹ì‚¬ì´íŠ¸ ì ‘ì†:
$ curl localhost
<!DOCTYPE html>...

ì²« ë²ˆì§¸ í„°ë¯¸ë„ì— ì‹¤ì‹œê°„ìœ¼ë¡œ ì¶”ê°€ë¨:
172.17.0.1 - - [15/Nov/2023:10:35:22 +0000] "GET / HTTP/1.1" 200 615 "-" "curl/7.81.0" "-"

ë™ì‘ ì›ë¦¬:
1. ê¸°ì¡´ ëª¨ë“  ë¡œê·¸ ì¶œë ¥
2. ë¡œê·¸ íŒŒì¼ ê°ì‹œ ì‹œì‘ (inotify)
3. ìƒˆ ë¡œê·¸ ë°œìƒ ì‹œ ì¦‰ì‹œ ì¶œë ¥
4. Ctrl+Cë¡œ ì¶”ì  ì¤‘ë‹¨
```

### **ì‹¤ì‹œê°„ ë¡œê·¸ í™œìš© ì‹œë‚˜ë¦¬ì˜¤**

```bash
ì›¹ì„œë²„ íŠ¸ë˜í”½ ëª¨ë‹ˆí„°ë§:
$ docker run -d -p 80:80 --name web nginx
$ docker logs -f web &           *# ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë¡œê·¸ ì¶”ì # ë‹¤ë¥¸ í„°ë¯¸ë„ì—ì„œ ë¶€í•˜ í…ŒìŠ¤íŠ¸*
$ for i in {1..10}; do curl localhost; done

ë¡œê·¸ ì¶œë ¥:
172.17.0.1 - - [15/Nov/2023:10:40:15 +0000] "GET / HTTP/1.1" 200 615 "-" "curl/7.81.0" "-"
172.17.0.1 - - [15/Nov/2023:10:40:15 +0000] "GET / HTTP/1.1" 200 615 "-" "curl/7.81.0" "-"
172.17.0.1 - - [15/Nov/2023:10:40:15 +0000] "GET / HTTP/1.1" 200 615 "-" "curl/7.81.0" "-"
...

ì• í”Œë¦¬ì¼€ì´ì…˜ ë””ë²„ê¹…:
$ docker logs -f app-container
INFO: Starting application...
DEBUG: Loading configuration from /app/config.json
WARN: Database connection timeout, retrying...
ERROR: Failed to connect to database: connection refused
```

### ğŸ”„ ê¸°ì¡´ ë¡œê·¸ëŠ” ì¡°íšŒí•˜ì§€ ì•Šê¸° + ìƒì„±ë˜ëŠ” ë¡œê·¸ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³´ê³  ì‹¶ì€ ê²½ìš°

### **[ê¸°ì¡´ ë¡œê·¸ ì œì™¸í•˜ê³  ì‹¤ì‹œê°„ ë¡œê·¸ë§Œ ì¶”ì ]**

```bash
$ docker logs --tail 0 -f [ì»¨í…Œì´ë„ˆ ID ë˜ëŠ” ì»¨í…Œì´ë„ˆëª…]
```

### **-tail 0 -f ì¡°í•© í™œìš©**

```bash
ê¸°ì¡´ ë¡œê·¸ ë¬´ì‹œí•˜ê³  ìƒˆ ë¡œê·¸ë§Œ ì¶”ì :
$ docker logs --tail 0 -f web
*# ê¸°ì¡´ ë¡œê·¸ëŠ” ì¶œë ¥í•˜ì§€ ì•ŠìŒ# ìƒˆë¡œ ë°œìƒí•˜ëŠ” ë¡œê·¸ë§Œ ì‹¤ì‹œê°„ í‘œì‹œ*

í™œìš© ìƒí™©:
1. ì¥ì‹œê°„ ì‹¤í–‰ëœ ì»¨í…Œì´ë„ˆ (ê¸°ì¡´ ë¡œê·¸ê°€ ë„ˆë¬´ ë§ìŒ)
2. íŠ¹ì • ì‹œì ë¶€í„°ì˜ ë¡œê·¸ë§Œ ê´€ì‹¬ ìˆëŠ” ê²½ìš°
3. ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ì—ë§Œ ì§‘ì¤‘í•˜ê³  ì‹¶ì€ ê²½ìš°

ì‹¤ìŠµ:
$ docker run -d -p 80:80 --name web nginx
$ docker logs --tail 0 -f web
*# ì•„ë¬´ê²ƒë„ ì¶œë ¥ë˜ì§€ ì•ŠìŒ (ëŒ€ê¸° ìƒíƒœ)*

$ curl localhost
*# ì¦‰ì‹œ ìƒˆ ë¡œê·¸ ì¶œë ¥:*
172.17.0.1 - - [15/Nov/2023:10:45:30 +0000] "GET / HTTP/1.1" 200 615 "-" "curl/7.81.0" "-"
```