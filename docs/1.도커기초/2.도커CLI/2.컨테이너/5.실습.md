## Docker로 Redis 실행시켜보기

### 1. Redis 이미지를 바탕으로 컨테이너 실행시키기

```bash
$ docker run -d -p 6379:6379 redis
```

로컬 환경에 redis 이미지가 없으면 Docker Hub으로부터 Redis 이미지를 자동으로 다운받아요.

### **명령어 상세 분석**

```bash
docker run 옵션 분석:
-d: 백그라운드 실행 (detached mode)
-p 6379:6379: 포트 매핑
    └─ 호스트 6379 포트 → 컨테이너 6379 포트
redis: 사용할 이미지명 (redis:latest와 동일)

실행 과정:
1. 로컬에서 redis 이미지 확인
2. 없으면 Docker Hub에서 redis:latest 다운로드
3. 컨테이너 생성 및 시작
4. Redis 서버가 6379 포트에서 대기 시작
```

### **실행 결과 확인**

```bash
실행 출력:
Unable to find image 'redis:latest' locally
latest: Pulling from library/redis
a2abf6c4d29d: Pull complete
c7a4e4382001: Pull complete
4044b9ba67c9: Pull complete
c8388a79482f: Pull complete
413c8bb60180: Pull complete
1abfd3011519: Pull complete
Digest: sha256:3ba4c8c1...
Status: Downloaded newer image for redis:latest
7f8e9c5d4b3a2e6f1c8d9e0a5b7c3f4d6e8a1b9c0d2e5f3g7h4i6j8k1l3m5n7o9p

컨테이너 ID 반환: 7f8e9c5d4b3a
```

### 2. 다운로드된 이미지 확인하기

```bash
$ docker image ls
```

`ls` : list의 약자

### **출력 예시**

```bash
REPOSITORY   TAG       IMAGE ID       CREATED       SIZE
redis        latest    7614ae9453d1   2 weeks ago   138MB
nginx        latest    605c77e624dd   3 weeks ago   141MB

Redis 이미지 정보:
- REPOSITORY: redis (공식 Redis 이미지)
- TAG: latest (최신 안정 버전)
- IMAGE ID: 7614ae9453d1 (고유 식별자)
- CREATED: 2 weeks ago (이미지 빌드 시점)
- SIZE: 138MB (압축된 이미지 크기)
```

### 2. 컨테이너가 잘 실행되고 있는지 체크

```bash
$ docker ps
```

### **출력 분석**

```bash
CONTAINER ID   IMAGE   COMMAND                  CREATED         STATUS         PORTS                    NAMES
7f8e9c5d4b3a   redis   "docker-entrypoint.s…"   2 minutes ago   Up 2 minutes   0.0.0.0:6379->6379/tcp   brave_curie

출력 해석:
- CONTAINER ID: 7f8e9c5d4b3a (Redis 컨테이너)
- IMAGE: redis (사용된 이미지)
- COMMAND: docker-entrypoint.s... (시작 스크립트)
- CREATED: 2 minutes ago (생성 시점)
- STATUS: Up 2 minutes (2분간 정상 실행 중)
- PORTS: 0.0.0.0:6379->6379/tcp (포트 매핑 확인)
- NAMES: brave_curie (자동 생성된 컨테이너 이름)
```

### **Redis 서버 연결 테스트**

```bash
호스트에서 Redis 연결 테스트 (redis-cli 설치된 경우):
$ redis-cli ping
PONG

또는 telnet으로 간단 테스트:
$ telnet localhost 6379
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
ping
+PONG
quit
+OK
```

### 4. 컨테이너 실행시킬 때 에러 없이 잘 실행됐는지 로그 체크

```bash
$ docker logs [컨테이너 ID 또는 컨테이너명]
```

### 5. Redis 컨테이너에 접속

```bash
$ docker exec -it [컨테이너 ID 또는 컨테이너명] bash
```

### **컨테이너 접속 과정**

```bash
 Redis 컨테이너 접속:
$ docker exec -it 7f8e9c5d4b3a bash
root@7f8e9c5d4b3a:/data*# # 또는 컨테이너 이름으로*
$ docker exec -it brave_curie bash
root@7f8e9c5d4b3a:/data*#*

프롬프트 분석:
- root: 컨테이너 내부에서 root 사용자
- @7f8e9c5d4b3a: 컨테이너 호스트명 (컨테이너 ID)
- :/data: 현재 위치 (/data 디렉토리)
- *#: root 사용자 프롬프트*
```

### 6. 컨테이너에서 Redis 사용해보기

```bash
$ redis-cli

127.0.0.1:6379> set 1 jeonghwan
127.0.0.1:6379> get 1
```

### **Redis CLI 상세 사용법**

```bash
Redis CLI 실행:
root@7f8e9c5d4b3a:/data*# redis-cli*
127.0.0.1:6379> 

프롬프트 의미:
- 127.0.0.1: 로컬호스트 (컨테이너 내부)
- 6379: Redis 기본 포트
- >: Redis CLI 프롬프트

기본 Redis 명령어 실습:
127.0.0.1:6379> set 1 jeonghwan
OK
127.0.0.1:6379> get 1
"jeonghwan"

127.0.0.1:6379> set name "홍길동"
OK
127.0.0.1:6379> get name
"\xed\x99\x8d\xea\xb8\xb8\xeb\x8f\x99"

127.0.0.1:6379> set user:1000 "john@example.com"
OK
127.0.0.1:6379> get user:1000
"john@example.com"
```

### **다양한 Redis 데이터 타입 실습**

```bash
String (문자열):
127.0.0.1:6379> set counter 10
OK
127.0.0.1:6379> incr counter
(integer) 11
127.0.0.1:6379> get counter
"11"

List (리스트):
127.0.0.1:6379> lpush fruits apple banana cherry
(integer) 3
127.0.0.1:6379> lrange fruits 0 -1
1) "cherry"
2) "banana"  
3) "apple"

Hash (해시):
127.0.0.1:6379> hset user:100 name "Alice" age 25 city "Seoul"
(integer) 3
127.0.0.1:6379> hget user:100 name
"Alice"
127.0.0.1:6379> hgetall user:100
1) "name"
2) "Alice"
3) "age"
4) "25"
5) "city"
6) "Seoul"

Set (집합):
127.0.0.1:6379> sadd languages python java javascript
(integer) 3
127.0.0.1:6379> smembers languages
1) "java"
2) "python"
3) "javascript"

Sorted Set (정렬된 집합):
127.0.0.1:6379> zadd scores 85 "Alice" 92 "Bob" 78 "Charlie"
(integer) 3
127.0.0.1:6379> zrange scores 0 -1 withscores
1) "Charlie"
2) "78"
3) "Alice"
4) "85"
5) "Bob"
6) "92"
```

### **Redis CLI 종료**

```bash
Redis CLI 종료:
127.0.0.1:6379> quit
root@7f8e9c5d4b3a:/data*#* 

컨테이너에서 나오기:
root@7f8e9c5d4b3a:/data*# exit*
exit
jeonghwanpark@Jeonghwanui-MacBookAir  ~ 

Redis 컨테이너는 계속 실행 중:
$ docker ps
CONTAINER ID   IMAGE   COMMAND                  CREATED         STATUS         PORTS                    NAMES
7f8e9c5d4b3a   redis   "docker-entrypoint.s…"   15 minutes ago  Up 15 minutes  0.0.0.0:6379->6379/tcp   brave_curie
```

### 7. Redis 컨테이너 정리

```bash
컨테이너 중지 및 삭제:
$ docker stop brave_curie
$ docker rm brave_curie

이미지 삭제 (선택사항):
$ docker rmi redis

데이터 영속성 확인:
*# 컨테이너 삭제 후 데이터는 사라짐# 데이터 보존하려면 Volume 사용 필요*
$ docker run -d -p 6379:6379 -v redis-data:/data redis
```