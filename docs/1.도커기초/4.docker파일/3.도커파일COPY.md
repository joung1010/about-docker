## COPY : íŒŒì¼ ë³µì‚¬(ì´ë™)

### ì˜ë¯¸

`COPY`ëŠ” **í˜¸ìŠ¤íŠ¸ ì»´í“¨í„°**ì— ìˆëŠ” íŒŒì¼ì„ ë³µì‚¬í•´ì„œ **ì»¨í…Œì´ë„ˆ**ë¡œ ì „ë‹¬í•´ìš”.

### ì‚¬ìš©ë²•

docker

```bash
*# ë¬¸ë²•*
COPY [í˜¸ìŠ¤íŠ¸ ì»´í“¨í„°ì— ìˆëŠ” ë³µì‚¬í•  íŒŒì¼ì˜ ê²½ë¡œ] [ì»¨í…Œì´ë„ˆì—ì„œ íŒŒì¼ì´ ìœ„ì¹˜í•  ê²½ë¡œ]

*# ì˜ˆì‹œ*
COPY app.txt /app.txt
```

### **COPY ëª…ë ¹ì–´ ë™ì‘ ì›ë¦¬**

```
COPY ì‹¤í–‰ ê³¼ì •:
1. Docker ë¹Œë“œ ì»¨í…ìŠ¤íŠ¸ì—ì„œ íŒŒì¼ ì°¾ê¸°
2. íŒŒì¼ì„ ìƒˆë¡œìš´ ì´ë¯¸ì§€ ë ˆì´ì–´ë¡œ ë³µì‚¬
3. ì»¨í…Œì´ë„ˆ íŒŒì¼ì‹œìŠ¤í…œì— íŒŒì¼ ë°°ì¹˜

ë¹Œë“œ ì»¨í…ìŠ¤íŠ¸:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Host Directory                     â”‚
â”‚  â”œâ”€â”€ Dockerfile                                â”‚
â”‚  â”œâ”€â”€ app.txt                                   â”‚
â”‚  â”œâ”€â”€ my-app/                                   â”‚
â”‚  â”‚   â”œâ”€â”€ index.js                             â”‚
â”‚  â”‚   â””â”€â”€ package.json                         â”‚
â”‚  â””â”€â”€ .dockerignore                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“ COPY
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Container Image                    â”‚
â”‚  â”œâ”€â”€ /app.txt                                  â”‚
â”‚  â”œâ”€â”€ /my-app/                                  â”‚
â”‚  â”‚   â”œâ”€â”€ index.js                             â”‚
â”‚  â”‚   â””â”€â”€ package.json                         â”‚
â”‚  â””â”€â”€ (ê¸°ì¡´ ë² ì´ìŠ¤ ì´ë¯¸ì§€ íŒŒì¼ë“¤)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## íŒŒì¼ ë³µì‚¬í•´ë³´ê¸°

### 1. app.txt íŒŒì¼ ë§Œë“¤ê¸°

```
í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì„±:
$ mkdir docker-copy-example
$ cd docker-copy-example
$ echo "Hello from app.txt!" > app.txt
$ cat app.txt
Hello from app.txt!
```

### 2. Dockerfile ë§Œë“¤ì–´ì„œ ì´ë¯¸ì§€ ìƒì„± ë° ì»¨í…Œì´ë„ˆ ì‹¤í–‰

**Dockerfile**

```
FROM ubuntu

COPY app.txt /app.txt

ENTRYPOINT ["/bin/bash", "-c", "sleep 500"] # ë””ë²„ê¹…ìš© ì½”ë“œ
```

```bash
$ docker build -t my-server .
$ docker run -d my-server
$ docker exec -it [Container ID] bash

$ ls
```

### **ì‹¤í–‰ ê²°ê³¼ ë¶„ì„**

```bash
ì»¨í…Œì´ë„ˆ ë‚´ë¶€ í™•ì¸:
root@abc123def456:/*# ls -la*
total 72
drwxr-xr-x   1 root root 4096 Nov 15 10:30 .
drwxr-xr-x   1 root root 4096 Nov 15 10:30 ..
-rw-r--r--   1 root root   20 Nov 15 10:30 app.txt  â† ë³µì‚¬ëœ íŒŒì¼
drwxr-xr-x   2 root root 4096 Nov 15 10:30 bin
drwxr-xr-x   2 root root 4096 Nov 15 10:30 boot
...

root@abc123def456:/*# cat app.txt*
Hello from app.txt!

íŒŒì¼ ê¶Œí•œ í™•ì¸:
root@abc123def456:/*# ls -la app.txt*
-rw-r--r-- 1 root root 20 Nov 15 10:30 app.txt
*# ì†Œìœ ì: root, ê·¸ë£¹: root, ê¶Œí•œ: 644*
```

## í´ë” ì•ˆì— ìˆëŠ” ëª¨ë“  íŒŒì¼ë“¤ ë³µì‚¬

### 1. `my-app` ë””ë ‰í„°ë¦¬ ë§Œë“¤ê¸°, `my-app` ë””ë ‰í„°ë¦¬ ì•ˆì— íŒŒì¼ ë§Œë“¤ê¸°

```bash
ë””ë ‰í† ë¦¬ ë° íŒŒì¼ ìƒì„±:
$ mkdir my-app
$ echo "console.log('Hello World!');" > my-app/index.js
$ echo '{"name": "my-app", "version": "1.0.0"}' > my-app/package.json
$ echo "This is README" > my-app/README.md

ë””ë ‰í† ë¦¬ êµ¬ì¡° í™•ì¸:
$ tree
.
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ app.txt
â””â”€â”€ my-app
    â”œâ”€â”€ README.md
    â”œâ”€â”€ index.js
    â””â”€â”€ package.json
```

### 2. Dockerfile ë§Œë“¤ì–´ì„œ ì´ë¯¸ì§€ ìƒì„± ë° ì»¨í…Œì´ë„ˆ ì‹¤í–‰

**Dockerfile**

```bash
FROM ubuntu

COPY my-app /my-app/

ENTRYPOINT ["/bin/bash", "-c", "sleep 500"] # ë””ë²„ê¹…ìš© ì½”ë“œ
```

### **í´ë” ë³µì‚¬ ì‹œ ê²½ë¡œ ì£¼ì˜ì‚¬í•­**

```
ê²½ë¡œ ì²˜ë¦¬ ë°©ì‹:
COPY my-app /my-app/     â† ê¶Œì¥ (ëª…í™•í•œ ë””ë ‰í† ë¦¬ ë³µì‚¬)
COPY my-app /my-app      â† ê°€ëŠ¥í•˜ì§€ë§Œ í˜¼ë™ ì—¬ì§€

ê²°ê³¼:
/my-app/
â”œâ”€â”€ README.md
â”œâ”€â”€ index.js
â””â”€â”€ package.json

ì˜ëª»ëœ ì˜ˆ:
COPY my-app/ /my-app     â† my-app ë‚´ìš©ë¬¼ë§Œ ë³µì‚¬ë¨
ê²°ê³¼: /my-appê°€ íŒŒì¼ì´ ë¨ (ë””ë ‰í† ë¦¬ê°€ ì•„ë‹Œ)
```

### **ì‹¤í–‰ ë° í™•ì¸**

```bash
$ docker build -t my-server .
$ docker run -d my-server
$ docker exec -it [Container ID] bash

ì»¨í…Œì´ë„ˆ ë‚´ë¶€ í™•ì¸:
root@abc123def456:/*# ls -la my-app/*
total 20
drwxr-xr-x 2 root root 4096 Nov 15 10:35 .
drwxr-xr-x 1 root root 4096 Nov 15 10:35 ..
-rw-r--r-- 1 root root   15 Nov 15 10:35 README.md
-rw-r--r-- 1 root root   29 Nov 15 10:35 index.js
-rw-r--r-- 1 root root   38 Nov 15 10:35 package.json
```

## ì™€ì¼ë“œì¹´ë“œ ì‚¬ìš©í•´ë³´ê¸°

### 1. `app.txt`, `readme.txt` íŒŒì¼ 2ê°œ ë§Œë“¤ê¸°

```bash
í…ìŠ¤íŠ¸ íŒŒì¼ë“¤ ìƒì„±:
$ echo "Application content" > app.txt
$ echo "This is readme" > readme.txt  
$ echo "Configuration data" > config.txt
$ ls *.txt
app.txt  config.txt  readme.txt
```

### 2. Dockerfile ë§Œë“¤ì–´ì„œ ì´ë¯¸ì§€ ìƒì„± ë° ì»¨í…Œì´ë„ˆ ì‹¤í–‰

**Dockerfile**

```bash
FROM ubuntu

COPY *.txt /text-files/

ENTRYPOINT ["/bin/bash", "-c", "sleep 500"] # ë””ë²„ê¹…ìš© ì½”ë“œ
```

**ì£¼ì˜)** `/text-files`ë¼ê³  ì ìœ¼ë©´ ì•ˆ ë˜ê³  `/text-files/`ë¼ê³  ì ì–´ì•¼ `text-files`ë¼ëŠ” ë””ë ‰í† ë¦¬ ì•ˆì— íŒŒì¼ë“¤ì´ ì •ìƒì ìœ¼ë¡œ ë³µì‚¬ë¼ìš”.

### **ì™€ì¼ë“œì¹´ë“œ íŒ¨í„´ë“¤**

```bash
ë‹¤ì–‘í•œ ì™€ì¼ë“œì¹´ë“œ íŒ¨í„´:
COPY *.txt /text-files/          *# ëª¨ë“  .txt íŒŒì¼*
COPY app.* /app-files/           *# appìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ëª¨ë“  íŒŒì¼*
COPY src/**/*.js /js-files/      *# src í•˜ìœ„ ëª¨ë“  .js íŒŒì¼ (ì¬ê·€ì )*
COPY [abc]*.txt /files/          *# a, b, cë¡œ ì‹œì‘í•˜ëŠ” .txt íŒŒì¼*
COPY *.{js,css} /assets/         *# .jsì™€ .css íŒŒì¼ë“¤*

ì£¼ì˜ì‚¬í•­:
- ì™€ì¼ë“œì¹´ë“œëŠ” ë¹Œë“œ ì»¨í…ìŠ¤íŠ¸ ë‚´ì—ì„œë§Œ ë™ì‘
- ëŒ€ìƒ ê²½ë¡œê°€ ë””ë ‰í† ë¦¬ë©´ ë°˜ë“œì‹œ /ë¡œ ëë‚´ê¸°
- ì—¬ëŸ¬ íŒŒì¼ ë³µì‚¬ ì‹œ ëŒ€ìƒì€ ë°˜ë“œì‹œ ë””ë ‰í† ë¦¬ì—¬ì•¼ í•¨
```

### **ì‹¤í–‰ ë° í™•ì¸**

```bash
$ docker build -t my-server .
$ docker run -d my-server
$ docker exec -it [Container ID] bash

$ ls /text-files/
app.txt  config.txt  readme.txt
```

## `.dockerignore` ì‚¬ìš©í•´ë³´ê¸°

íŠ¹ì • íŒŒì¼ ë˜ëŠ” í´ë”ë§Œ `COPY`ë¥¼ í•˜ê³  ì‹¶ì§€ ì•Šì„ ìˆ˜ ìˆì–´ìš”. ê·¸ëŸ´ ë•Œ `.dockerignore`ë¥¼ í™œìš©í•´ìš”.

### 1. `.dockerignore` íŒŒì¼ ë§Œë“¤ê¸°

**.dockerignore**

```bash
readme.txt
node_modules/
.git/
*.log
.env
```

### **`.dockerignore` íŒ¨í„´**

bash

```bash
.dockerignore íŒ¨í„´ ì˜ˆì‹œ:
*# íŠ¹ì • íŒŒì¼ ì œì™¸*
readme.txt
config.json

*# íŠ¹ì • ë””ë ‰í† ë¦¬ ì œì™¸*  
node_modules/
.git/
build/

*# íŒ¨í„´ ë§¤ì¹­*
*.log           *# ëª¨ë“  .log íŒŒì¼*
*.tmp           *# ëª¨ë“  .tmp íŒŒì¼*  
**/*.test.js    *# ëª¨ë“  .test.js íŒŒì¼ (ì¬ê·€ì )# ì˜ˆì™¸ ì²˜ë¦¬ (!)*
*.txt           *# ëª¨ë“  .txt íŒŒì¼ ì œì™¸*
!important.txt  *# ë‹¨, important.txtëŠ” í¬í•¨# ì£¼ì„# This is a comment*
```

### 2. Dockerfile ë§Œë“¤ì–´ì„œ ì´ë¯¸ì§€ ìƒì„± ë° ì»¨í…Œì´ë„ˆ ì‹¤í–‰

**Dockerfile**

```bash
FROM ubuntu

COPY ./ /

ENTRYPOINT ["/bin/bash", "-c", "sleep 500"] # ë””ë²„ê¹…ìš© ì½”ë“œ
```

bash

```bash
$ docker build -t my-server .
$ docker run -d my-server
$ docker exec -it [Container ID] bash

$ ls
```

### **`.dockerignore` ë™ì‘ í™•ì¸**

```bash
í˜¸ìŠ¤íŠ¸ ë””ë ‰í† ë¦¬:
$ ls
Dockerfile  app.txt  config.txt  my-app/  readme.txt

ì»¨í…Œì´ë„ˆ ë‚´ë¶€ (readme.txtê°€ ì œì™¸ë¨):
root@abc123def456:/*# ls*
Dockerfile  app.txt  config.txt  my-app/  bin  boot  dev  ...

*# readme.txtê°€ ë³µì‚¬ë˜ì§€ ì•ŠìŒì„ í™•ì¸*
root@abc123def456:/*# ls -la readme.txt*
ls: cannot access 'readme.txt': No such file or directory
```

### ğŸ¯ COPY ìµœì í™” íŒ

### **ë ˆì´ì–´ ìºì‹± ìµœì í™”**

docker

```bash
âŒ ë¹„íš¨ìœ¨ì ì¸ ë°©ë²•:
FROM node:18
COPY . /app          # ëª¨ë“  íŒŒì¼ ë³µì‚¬
WORKDIR /app
RUN npm install

*# ì†ŒìŠ¤ ì½”ë“œ ë³€ê²½ ì‹œ npm installë„ ë‹¤ì‹œ ì‹¤í–‰ë¨*

âœ… íš¨ìœ¨ì ì¸ ë°©ë²•:
FROM node:18
WORKDIR /app
COPY package*.json ./    # ì˜ì¡´ì„± íŒŒì¼ë§Œ ë¨¼ì € ë³µì‚¬
RUN npm install          # ì˜ì¡´ì„± ì„¤ì¹˜ (ìºì‹œë¨)
COPY . .                 # ë‚˜ë¨¸ì§€ íŒŒì¼ ë³µì‚¬

*# package.jsonì´ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©´ npm install ë‹¨ê³„ê°€ ìºì‹œë¨*
```

### **ê¶Œí•œ ê´€ë¦¬**

```bash
ê¶Œí•œ ì„¤ì •:
FROM ubuntu
RUN groupadd -r appgroup && useradd -r -g appgroup appuser
COPY --chown=appuser:appgroup app.txt /app/app.txt

ë˜ëŠ”:
COPY app.txt /app/app.txt
RUN chown appuser:appgroup /app/app.txt
```

### **COPY vs ADD ë¹„êµ**

```bash
COPY vs ADD:

COPY:
âœ… ë‹¨ìˆœí•œ íŒŒì¼/ë””ë ‰í† ë¦¬ ë³µì‚¬
âœ… ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë™ì‘
âœ… ê¶Œì¥ ì‚¬í•­

ADD:
âš ï¸ ìë™ ì••ì¶• í•´ì œ ê¸°ëŠ¥
âš ï¸ URLì—ì„œ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥
âš ï¸ ì˜ˆì¸¡í•˜ê¸° ì–´ë ¤ìš´ ë™ì‘

ê¶Œì¥ì‚¬í•­: íŠ¹ë³„í•œ ì´ìœ ê°€ ì—†ë‹¤ë©´ COPY ì‚¬ìš©
```

### **ë©€í‹°ìŠ¤í…Œì´ì§€ ë¹Œë“œì™€ COPY**

```bash
*# ë¹Œë“œ ìŠ¤í…Œì´ì§€*
FROM node:18 AS builder
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build

*# í”„ë¡œë•ì…˜ ìŠ¤í…Œì´ì§€*
FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html

*# ë¹Œë“œ ìŠ¤í…Œì´ì§€ì˜ ê²°ê³¼ë¬¼ë§Œ ë³µì‚¬*
```